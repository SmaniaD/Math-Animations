\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{margin=2.5cm}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{enumitem}
\usepackage{fourier}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  urlcolor=teal,
  pdfauthor={Daniel Smania},
  pdftitle={2D Wavelet Animation Script - User Manual}
}

\definecolor{bg}{RGB}{245,245,245}
\lstset{
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{bg},
  frame=single,
  breaklines=true,
  columns=flexible,
  keywordstyle=\color{teal}\bfseries,
  commentstyle=\color{gray}\itshape,
  stringstyle=\color{purple},
  numbers=left,
  numberstyle=\tiny\color{gray},
  xleftmargin=1.5em,
  aboveskip=1em,
  belowskip=1em
}

\begin{document}

\begin{center}
{\LARGE\bfseries 2D Wavelet Animation Script User Manual}\\[0.5em]
{\large Daniel Smania} \\[0.5em]
Version: \texttt{1.0} \quad--\quad Last updated: \today
\end{center}

\vspace{1em}

\tableofcontents
\newpage

\section{Introduction}
This script generates a 2D animation of wavelet-based reconstructions of synthetic surfaces. It offers configurable color schemes, surface styles, and layout orientations to facilitate visualizations in educational and research contexts.

Key features:
\begin{itemize}[nosep]
  \item Animates 2D wavelet reconstructions incrementally.
  \item Offers various synthetic function types including smooth, discontinuous, Dirac, and mixed types.
  \item Configurable color schemes and visual styles.
  \item Produces MP4 or GIF outputs optionally.
  \item Logs command-line usage for reproducibility.
\end{itemize}

\section{Prerequisites}
\begin{itemize}[nosep]
  \item \textbf{Python} $\ge$ 3.8
  \item Required packages: \texttt{numpy}, \texttt{matplotlib}, \texttt{pywavelets}, \texttt{pillow}, \texttt{argparse}, \texttt{tkinter}, \texttt{scipy}.
  \item For MP4 export: \href{https://ffmpeg.org/}{FFmpeg} in system \texttt{PATH}.
\end{itemize}

Install dependencies via:
\begin{lstlisting}[language=bash]
pip install numpy matplotlib pywavelets pillow scipy
sudo apt install ffmpeg  # For MP4 export
\end{lstlisting}

\section{Quick Start}
\begin{lstlisting}[language=bash]
python wavelet2d.py 
\end{lstlisting}
to generate an animation with default parameters.
\begin{lstlisting}[language=bash]
python wavelet2d.py --wavelet_type haar --function_type smooth \
  --color_scheme vibrant --orientation portrait --save gif
\end{lstlisting}
This command produces a vibrant-colored portrait layout animation from a smooth synthetic function using \texttt{haar} wavelets.

\section{Command-Line Options}
\begin{description}[leftmargin=2.5cm, style=sameline]
  \item[\texttt{---frames\_per\_wavelet}] Animation speed (frames per wavelet). Default: \texttt{3}.
    \item[\texttt{---wavelet\_type}] Wavelet type from PyWavelets discrete wavelets (e.g., \texttt{haar}, \texttt{db4}, \texttt{coif4}). Default: \texttt{haar}.
    \item[\texttt{---function\_type}] Function type: \texttt{smooth}, \texttt{piecewise\_linear}, \texttt{discontinuous}, \texttt{smooth\_periodic}, \texttt{mix}, \texttt{dirac}. Default: \texttt{smooth}.
    \item[\texttt{---function\_seed}] Random seed for function generation. Default: \texttt{38324}.
    \item[\texttt{---number\_wavelets}] Number of wavelets to animate. Default: \texttt{256}.
    \item[\texttt{---save}] Save animation format: \texttt{gif}, \texttt{mp4}. Default: \texttt{none} (display only).
    \item[\texttt{---grid\_size}] Grid size for 2D function (NxN). Default: \texttt{64}.
    \item[\texttt{---color\_scheme}] Color scheme for reconstruction: \texttt{vibrant}, \texttt{gray}, \texttt{marine}, \texttt{ocean}. Default: \texttt{marine}.
    \item[\texttt{---original\_style}] Original function style: \texttt{transparent}, \texttt{wireframe}, \texttt{solid\_contrast}, \texttt{gradient}, \texttt{oscillating\_transparent}, \texttt{none}. Default: \texttt{wireframe}.
    \item[\texttt{---original\_alpha}] Base transparency of original function. Range: [0.0, 1.0]. Default: \texttt{0.9}.
    \item[\texttt{---oscillating\_speed}] Oscillation speed for original function transparency. Default: \texttt{0.05}.
    \item[\texttt{---orientation}] Layout orientation: \texttt{landscape} (side-by-side), \texttt{portrait} (vertical stack). Default: \texttt{landscape}.
    \item[\texttt{---camera}] Camera movement: \texttt{static\_overview}, \texttt{rotating}. Default: \texttt{rotating}.
    \item[\texttt{---single\_wavelet}] Single wavelet animation type: \texttt{2d}, \texttt{3d}. Default: \texttt{3d}.
\end{description}

\subsection*{Animation}
When \texttt{--save} is \texttt{gif} or \texttt{mp4}, the script writes a file named:
\begin{center}
\texttt{wavelet2d-<YYYY-MM-DD-HH-MM-SS>-<parameters>.(gif|mp4)}
\end{center}

\subsection*{Run History}
Each execution appends a timestamped entry to \texttt{wavelet2d\_history.log} with the command used and its parameters. Only the last 100 entries are preserved.

\section{Examples}
\subsection*{1. Marine palette preview}
\begin{lstlisting}[language=bash]
python wavelet2d.py --wavelet_type haar --color_scheme marine --save gif
\end{lstlisting}

 

\section{Workflow Internals}
\begin{enumerate}[label=\arabic*.]
  \item Generate a 2D synthetic function \texttt{f\_2d}.
  \item Compute its wavelet decomposition with \texttt{pywt.wavedec2()}.
  \item Initialize 3D plots using \texttt{matplotlib}'s surface tools.
  \item Update the partial reconstruction frame-by-frame.
  \item Display the original, cumulative, and single-wavelet surfaces.
  \item Animate camera position and lighting.
  \item Save result if requested.
\end{enumerate}

\section{Troubleshooting}
\begin{description}[leftmargin=2.5cm, style=sameline]
  \item[No display] Use \texttt{--save} to bypass GUI requirements.
  \item[Low performance] Try \texttt{--grid\_size 32} or a simpler color scheme.
  \item[No MP4] Ensure \texttt{ffmpeg} is in your system \texttt{PATH}.
\end{description}

\section{Extending the Script}
\begin{itemize}[nosep]
  \item Add new colormaps in \texttt{get\_colormaps()}.
  \item Use Tkinter to build a GUI around this script.
  \item Load real datasets in place of \texttt{random\_function\_2d()}.
\end{itemize}

\section*{License}
MIT License â€“ feel free to adapt and redistribute with attribution.

\end{document}
